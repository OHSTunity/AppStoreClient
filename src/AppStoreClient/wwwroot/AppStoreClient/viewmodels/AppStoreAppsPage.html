<link rel="import" href="/sys/puppet-redirect/src/puppet-redirect.html">
<link rel="import" href="/sys/star-rating/star-rating.html">
<link rel="stylesheet" href="/AppStoreClient/css/master.css">
<script src="/sys/polymer-filters/filter-orderBy.js"></script>

<template>

    <Style>


        .appstorebody {
            font-family:Verdana, Geneva, sans-serif;
            background: #B3B3B3;
        }
        .appstoreheader {
        -webkit-box-shadow: 0 0 2px rgba(0,0,0,.12),0 2px 4px rgba(0,0,0,.24);
        box-shadow: 0 0 2px rgba(0,0,0,.12),0 2px 4px rgba(0,0,0,.24);
            background-color: rgba(255, 255, 255, 0.9);
            padding:5px 5px 5px 20px;
        }

    .appTitle {
        /*font-family: times, Times New Roman, times-roman, georgia, serif;*/
        /*font-size: 48px;*/
        /*line-height: 40px;*/
        letter-spacing: -1px;
        font-size: 17px;
        font-weight: normal;

        color: #1E81DE;
        margin: 10px 10px 0px 0px;
        padding: 0px;
    }

    .appDescription {
        letter-spacing: -1px;
        font-size: 13px;
        color: #707070;
        margin: 5px 5px 5px 0px;
        padding: 0px;
        font-weight: 100;
        /*text-overflow: ellipsis;
display: -webkit-box;
-webkit-line-clamp: 3;
-webkit-box-orient: vertical;

*/
    }

    .appLogo {
        margin: 15px 10px 10px 10px;
    }

    .appLogo > img {
        max-height:38px
    }

    .errorNotice {
        color: #FFFFFF;
        padding: 5px 5px 5px 5px;
        background-color: #F57900;
        border-radius: 5px;
        box-sizing: border-box;
    }

    .circleBase {
        border-radius: 50%;
        behavior: url(PIE.htc); /* remove if you don't care about IE8 */
    }
    .type1 {
        width: 30px;
        height: 30px;
        background: #1E81DE;
        border: 1px solid #1E81DE;
    }

    /*Buttons ontop of banner */
    .operations {
        position: relative;
        top: -123px;
        right: 0px;
        text-align: right;
    }

    .appStoreItemPanel {
        display: -webkit-flex;
        display: flex;
        -webkit-align-items: center;
        align-items: center;
        -webkit-justify-content: left;
        justify-content: left;
        -webkit-flex-direction: row;
        flex-direction: row;
        -webkit-flex-wrap: wrap;
        flex-wrap: wrap;
        -webkit-flex-flow: row wrap;
        flex-flow: row wrap;
        -webkit-align-content: flex-end;
        align-content: flex-end;
        padding: 10px;
    }

    .appStoreItem {
        display: -webkit-flex;
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
        width: 280px;
        height: 280px;
        vertical-align: top;
        padding: 0px;
        margin: 10px;
        -webkit-box-shadow: 0 0 2px rgba(0,0,0,.12),0 2px 4px rgba(0,0,0,.24);
        box-shadow: 0 0 2px rgba(0,0,0,.12),0 2px 4px rgba(0,0,0,.24);
        border-radius: 0px;
        border: 0px solid transparent;
        margin-bottom: 15px;
        background-color: rgba(255, 255, 255, 1);
        color: #000000;
        font-family:Verdana, Geneva, sans-serif;
    }

    /* Banner part */
    .appStoreItem > div:first-child {
        /*display: -webkit-flex;
    display: flex;*/
        -webkit-flex: 0 0 auto;
        flex: 0 0 auto;
        padding: 0px;
        height: 120px;
    }

    /* Middle part*/
    .appStoreItem > div:nth-child(2) {
        display: -webkit-flex;
        display: flex;
        flex-direction: row;
        -webkit-flex: 1 0 0;
        flex: 1 0 0;
        overflow: hidden;
    }

    /* Middle Icon part */
    .appStoreItem > div:nth-child(2) > div:first-child {
        -webkit-flex: 0 0 auto;
        flex: 0 0 auto;
    }

    /* Middle Info part */
    .appStoreItem > div:nth-child(2) > div:nth-child(2) {
        -webkit-flex: 1 0 0;
        flex: 1 0 0;
        overflow: hidden;
    }

    /* Bottom part */
    .appStoreItem > div:last-child  {

        display: -webkit-flex;
        display: flex;
        flex-direction: row;

        -webkit-flex: 0 0 auto;
        flex: 0 0 auto;
        overflow: auto;
        background: rgba(0, 0, 0, 0.03);
    }

    /* Bottom left part */
    .appStoreItem > div:last-child > div:first-child {
        -webkit-flex: 1 0 auto;
        flex: 1 0 auto;
        overflow: auto;
    }

    /* Bottom middle part */
    .appStoreItem > div:last-child > div:nth-child(2) {
        -webkit-flex: 1 0 auto;
        flex: 1 0 auto;
        overflow: auto;
    }

    /* Bottom right part */
    .appStoreItem > div:last-child > div:last-child {
        -webkit-flex: 0 0 auto;
        flex: 0 0 auto;
        overflow: auto;
    }


    /* Button */
    .appStoreItem button {
        border: 0px;
        padding: 5px 10px 5px 10px;
        color: white;
        border-radius: 0px;
        min-width: 80px;
        margin: 0px;
        cursor: pointer;
    }

    </Style>

    <div class="appstorebody">


    <template if="{{ErrorResponce.Text}}">
        <div class="errorNotice">{{ErrorResponce.Text}}</div>
    </template>

    <template repeat="{{store in AppStores}}">
        <div class="appstoreheader">
        <h1>{{store.DisplayName}} Store</h1>

        </div>

        <div class="appStoreItemPanel">

            <template repeat="{{item, i in store.Items | orderBy('DisplayName')}}">

                <div class="appStoreItem">

                    <!-- Banner -->
                    <div>

<!--                        <img style="height:100%; width:100%" src="bg/{{i}}.jpg" />-->
                        <img style="height:100%; width:100%;" src="/appstoreclient/bg/Banner_{{item.DisplayName}}.jpg" />

                        <div class="operations" >
                            <template if="{{item.IsBusy$}}">


                                <div  class="spinner medium"></div>
                            </template>

                            <template if="{{!item.IsBusy$}}">
                                <template if="{{!item.IsInstalled}}">
                                    <button style="background: #1E81DE" onclick="getModel(this).item.IsBusy$ = true;getModel(this).item.Install$++">Install</button>
                                </template>

<!--                                <template if="{{item.IsInstalled}}">
                                    <button style="background: #479E13" onclick="getModel(this).item.IsBusy$ = true;getModel(this).item.Start$++">Start</button>
                                </template>-->

                                <template if="{{item.NewVersionAvailable && item.IsInstalled}}">
                                    <button style="background: #1E81DE" onclick="getModel(this).item.IsBusy$ = true;getModel(this).item.Upgrade$++">Upgrade</button>
                                </template>

                                <template if="{{item.IsInstalled}}">
                                    <button style="background: #479E13" onclick="getModel(this).item.IsBusy$ = true;getModel(this).item.Start$++">Start</button>
                                    <button style="background: #DE3F1E" onclick="getModel(this).item.IsBusy$ = true;getModel(this).item.Stop$++">Stop</button>
                                    <button style="background: #DE3F1E" onclick="getModel(this).item.IsBusy$ = true;getModel(this).item.Uninstall$++">Uninstall</button>
                                </template>
                            </template>
                        </div>

                    </div>

                    <!-- Middle part-->
    	            <div                         
                        
                        <!-- Logo -->
                        <div class="appLogo" >
                            <img  src="{{item.ImageUrl}}" />
                        </div>

                        <!-- Info -->
                        <div>

                            <template if="{{item.Heading}}">
                                <h1 class="appTitle">{{item.Heading}}</h1>
                            </template>
                            <template if="{{!item.Heading}}">
                                <h1 class="appTitle">{{item.DisplayName}}</h1>
                            </template>

                            <div class="appDescription">
                                {{item.Description}}
                            </div>


                        </div>

                    </div>

                    <!-- Bottom part -->
                    <div>


                        <!-- Rateings -->
                        <div>
                            
                        </div>
                        <div>
                        </div>
                        <div>
                            <div style="margin:5px;text-align:center">
                                <!--<img height="20px" src="http://blog.sweetiq.com/wp-content/uploads/2012/07/3-5-stars.png" />-->
                                <img height="15px" src="http://www.designeatrun.com/wp-content/uploads/2014/08/four-and-a-half-star-rating.png" />
                                <p style="padding:0;margin:0;font-size:10px;text-align:center">(123 ratings)</p>

                            </div>
                            
                        </div>
                        
                            <!--<star-rating stars="5" rate="0"></star-rating>-->
                    </div>

	            
                </div>

            </template>
        </div>
    </template>
    </div>

    <link is="puppet-redirect" history url="{{ RedirectUrl }}">
   
</template>

